"use strict";(self.webpackChunkaquadoggo_website=self.webpackChunkaquadoggo_website||[]).push([[3233],{3441:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>d,toc:()=>r});var n=i(5893),o=i(1151);const s={id:"document-views",title:"Document views"},a=void 0,d={id:"specifications/aquadoggo/data-types/document-views",title:"Document views",description:"- Document views represent the immutable state of a document at a particular point in its history of edits",source:"@site/docs/specifications/aquadoggo/data-types/document-views.md",sourceDirName:"specifications/aquadoggo/data-types",slug:"/specifications/aquadoggo/data-types/document-views",permalink:"/specifications/aquadoggo/data-types/document-views",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"document-views",title:"Document views"},sidebar:"specifications",previous:{title:"Documents",permalink:"/specifications/aquadoggo/data-types/documents"},next:{title:"Blobs",permalink:"/specifications/aquadoggo/data-types/blobs"}},c={},r=[{value:"Document view id",id:"document-view-id",level:2},{value:"The Latest Document View",id:"the-latest-document-view",level:2}];function l(e){const t={a:"a",admonition:"admonition",em:"em",h2:"h2",li:"li",p:"p",ul:"ul",...(0,o.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.em,{children:"Document views"})," represent the immutable state of a document at a particular point in its history of edits","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Every change of a document results in a new document view"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["A ",(0,n.jsx)(t.em,{children:"document view"})," is the result of applying a series of operations from a ",(0,n.jsx)(t.em,{children:"document"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["See ",(0,n.jsx)(t.a,{href:"/specifications/aquadoggo/data-types/documents",children:"reduction"})," and ",(0,n.jsx)(t.a,{href:"/specifications/aquadoggo/data-types/documents",children:"reconciliation"})," for further details"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.li,{children:"A document view has a value for all fields that are defined by its document's schema unless the document has been deleted"}),"\n"]}),"\n",(0,n.jsx)(t.admonition,{title:"Factoid: Latest document view",type:"info",children:(0,n.jsxs)(t.p,{children:["The most common document view you will encounter is the current state of a document. If you query a document by its id, this is what you will get, and you won't think about document views all that much. However, the immutable nature of document views, and the ability to refer to them by their document view id are extremely useful properties which make things like ",(0,n.jsx)(t.em,{children:"pinned relations"})," possible ."]})}),"\n",(0,n.jsx)(t.h2,{id:"document-view-id",children:"Document view id"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["A document view is identified by its set of graph tips: the ",(0,n.jsx)(t.em,{children:"document view id"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Each graph tip is represented as an ",(0,n.jsx)(t.em,{children:"operation id"})]}),"\n",(0,n.jsx)(t.li,{children:"It's possible to replicate the exact state of a document from the document view id"}),"\n",(0,n.jsx)(t.li,{children:"The document view id grows unbounded with the number of unmerged graph tips"}),"\n",(0,n.jsxs)(t.li,{children:["If a limited size identifier is required, the document view's ",(0,n.jsx)(t.em,{children:"hash id"})," can be used","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"To construct the hash id sort the graph tips of a document view id, concatenate their byte values and hash the result using YASMF."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.admonition,{title:"Requirement DV1",type:"caution",children:(0,n.jsxs)(t.p,{children:["Following Requirement EN2, operations in a document view id MUST be lexicographically sorted and de-duplicated before encoding and when generating a ",(0,n.jsx)(t.em,{children:"hash id"}),"."]})}),"\n",(0,n.jsx)(t.admonition,{title:"Requirement DV2",type:"caution",children:(0,n.jsx)(t.p,{children:"All operations referenced in a document view id must originate from the same document."})}),"\n",(0,n.jsx)(t.h2,{id:"the-latest-document-view",children:"The Latest Document View"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"It is defined as that document view which incorporates all valid operations that are known to the node and part of the document"}),"\n",(0,n.jsx)(t.li,{children:"As two nodes in the p2panda network may not share knowledge of the same operations, the latest document view may differ from node to node"}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},1151:(e,t,i)=>{i.d(t,{Z:()=>d,a:()=>a});var n=i(7294);const o={},s=n.createContext(o);function a(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);